(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{9874:function(e,t,r){Promise.resolve().then(r.t.bind(r,5964,23)),Promise.resolve().then(r.t.bind(r,1164,23)),Promise.resolve().then(r.bind(r,551))},551:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n,s=r(9268),l=r(6006),a=r(5644),o=r.n(a),i=r(7266),c=r.n(i);function u(e){let{results:t}=e;return(0,s.jsx)("div",{className:c().results,children:(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:t.columns.map((e,t)=>(0,s.jsx)("th",{children:e},t))}),t.values.map((e,t)=>(0,s.jsx)("tr",{children:e.map((e,t)=>(0,s.jsx)("td",{children:e},t))},t))]})})})}var _=r(7736),d=r.n(_),y=r(481),h=r.n(y),f=r(5964),p=r.n(f);function m(e){let{children:t,highlit:r=!1}=e;return(0,s.jsx)("div",{className:[p().container,r?p().highlit:null].filter(Boolean).join(" "),children:t})}var v=r(1634),j=r.n(v);let x=/\r\n|\r|\n/;function b(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)}let g=(e,t)=>{let r=e.length;return r>0&&e[r-1]===t?e:e.concat(t)};function N(e){let{children:t,language:r,highlight:n}=e,l=t.replace(/\n$|^\n/g,""),a=function(e,t){let r=j().languages[e],n={code:t,grammar:r,language:e,tokens:[]};return j().hooks.run("before-tokenize",n),n.tokens=j().tokenize(t,r),j().hooks.run("after-tokenize",n),function(e){let t=[[]],r=[e],n=[0],s=[e.length],l=0,a=0,o=[],i=[o];for(;a>-1;){for(;(l=n[a]++)<s[a];){let e;let c=t[a],u=r[a],_=u[l];if("string"==typeof _?(c=a>0?c:["plain"],e=_):(c=g(c,_.type),_.alias&&(c=g(c,_.alias)),e=_.content),"string"!=typeof e){a++,t.push(c),r.push(e),n.push(0),s.push(e.length);continue}let d=e.split(x),y=d.length;o.push({types:c,content:d[0]});for(let e=1;e<y;e++)b(o),i.push(o=[]),o.push({types:c,content:d[e]})}a--,t.pop(),r.pop(),n.pop(),s.pop()}return b(o),i}(n.tokens)}(r,l),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return()=>!1;let t=e.split(","),r=t.flatMap(e=>{if(!e.includes("-"))return Number(e);{let[t,r]=e.split("-").map(Number);return Array(r-t+1).fill(0).map((e,r)=>r+t)}});return e=>r.includes(e)}(n);return a.map((e,t)=>(0,s.jsx)("div",{className:[p().line,o(t+1)?p().highlight:""].join(" "),children:e.map((e,t)=>(0,s.jsx)("span",{className:e.types.map(e=>p()[e]).join(" "),children:e.content},t))},t))}function w(e){let{code:t,setCode:r}=e;return(0,s.jsx)("div",{className:h().editor,children:(0,s.jsx)(m,{children:(0,s.jsx)(d(),{value:t,onValueChange:r,highlight:e=>(0,s.jsx)(N,{language:"javascript",children:e}),className:h().textarea})})})}let A=Symbol();async function C(e){let t=[];for await(let r of e)t.push(r);return t}function*E(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n,s]=t;yield{type:"part",value:n[0]};for(let e=0;e<s.length;e++){let t=s[e];t&&"object"==typeof t&&A in t?yield*E(...t[A]()):yield{type:"bind",value:t},yield{type:"part",value:n[e+1]}}}let S=(n=async function*(){},function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];let l=Array.from(function*(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n="";for(let{type:e,value:r}of E(...t))"bind"===e?(yield n,n=""):n+=r;yield n}(e,r)),a=Array.from(function*(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let{type:e,value:r}of E(...t))"bind"===e&&(yield r)}(e,r));return{[A]:()=>[l,a],then(e,t){return C(this).then(e,t)},[Symbol.asyncIterator]:()=>n(l,a)}});function k(e){let t,r,{type:n,value:l}=e;switch(r=l instanceof Error?l.name+": "+l.message:JSON.stringify(l),n){case"js_error":t="Javasript Error";break;case"sql_error":t="SQL Error";break;case"return_error":r="Return a query to see the results"}return(0,s.jsx)("div",{className:o().errorContainer,children:(0,s.jsxs)("div",{className:o().error,children:[t&&(0,s.jsx)("div",{className:o().errorTitle,children:t}),r]})})}function I(){let e="–\\|/",[t,r]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let t=setInterval(()=>{r(t=>(t+1)%e.length)},150);return()=>clearInterval(t)}),e[t]}function L(e){let t,r,{load:n,database:l,setLoad:a}=e;return n&&l?t="✔":n&&!l?(t=(0,s.jsx)(I,{}),r="Loading"):(t=">",r="Load Live Demo"),(0,s.jsx)("button",{onClick:()=>a(!0),disabled:n,className:o().loadContainer,...l&&{"data-database":!0},children:(0,s.jsxs)("div",{className:o().loadButton,children:[(0,s.jsx)("span",{className:o().loadButtonIcon,children:t})," ",r]})})}async function B(e){let t=await r.e(65).then(r.t.bind(r,851,23));e.throwIfAborted();let{Database:n}=await t.default();return n}async function q(e){let t=await fetch("/query/database",{signal:e});e.throwIfAborted();let r=await t.arrayBuffer();return new Uint8Array(r)}async function P(e){let[t,r]=await Promise.all([B(e),q(e)]);e.throwIfAborted();let n=new t(r);return e.addEventListener("abort",()=>n.close()),n}function O(e){let{initialResults:t,initialCode:r}=e,[n,a]=(0,l.useState)(!1),i=function(e){let[t,r]=(0,l.useState)();return(0,l.useEffect)(()=>{if(!e)return;let t=new AbortController;return(async()=>{try{let e=await P(t.signal);t.signal.throwIfAborted(),r(e)}catch(e){}})(),()=>t.abort()},[e]),t}(n),[c,_]=(0,l.useState)(r),[d,y]=(0,l.useState)(t),[h,f]=(0,l.useState)({type:"result",value:t});return(0,l.useEffect)(()=>{if(!i)return;let e=function(e,t){try{let r=Function("query",t),n=r(S);if(!n||"object"!=typeof n||!(A in n))return{type:"return_error",value:n};{let[t,r]=n[A]();try{let n=e.exec(t.join("?"),r)[0];if(!n)return{type:"sql_error",value:Error("No results")};return{type:"result",value:n}}catch(e){return{type:"sql_error",value:e}}}}catch(e){return{type:"js_error",value:e}}}(i,c);f(e),"result"===e.type&&y(e.value)},[i,c]),(0,s.jsx)("section",{id:"Demo",className:o().container,children:(0,s.jsxs)("div",{className:o().card,children:[(0,s.jsxs)("div",{className:o().side,children:[(0,s.jsx)("h1",{className:o().title,children:"QueryX"}),(0,s.jsx)("h2",{className:o().tagline,children:"A Javascript tool for composing and executing SQL queries"})]}),(0,s.jsxs)("div",{className:o().main,children:[(0,s.jsxs)("div",{className:o().editor,children:[(0,s.jsx)(w,{code:c,setCode:_}),(0,s.jsx)(L,{load:n,database:!!i,setLoad:a})]}),(0,s.jsxs)("div",{className:o().results,children:["result"!==h.type&&(0,s.jsx)(k,{...h}),(0,s.jsx)(u,{results:d})]})]})]})})}},5964:function(e){e.exports={container:"styles_container__jy1l_",highlit:"styles_highlit__JjWSK",line:"styles_line__aOS_T",highlight:"styles_highlight__lqo_T",comment:"styles_comment__UauEA",string:"styles_string__bCSta",url:"styles_url__fwX6P",symbol:"styles_symbol__PsLb2",variable:"styles_variable__EFBo4",number:"styles_number__dhAtQ",builtin:"styles_builtin__pNr_d",char:"styles_char__xdODs",constant:"styles_constant__YDnmm",function:"styles_function__1eRN9",tag:"styles_tag__0_sqj",operator:"styles_operator__ty4_w",keyword:"styles_keyword__RcxoL",boolean:"styles_boolean__MSjvs",property:"styles_property__BaBI9",namespace:"styles_namespace__KWXQL"}},5644:function(e){e.exports={container:"styles_container__S0Ptr",card:"styles_card__xSmZP",side:"styles_side__fA9nv",main:"styles_main__JNmlP",title:"styles_title__wEJ_p",tagline:"styles_tagline__yu5i4",editor:"styles_editor__vc_fu",loadContainer:"styles_loadContainer__E8vLy",loadButton:"styles_loadButton__PL_ls",loadButtonIcon:"styles_loadButtonIcon__Y7jwQ",results:"styles_results__IX3in",errorContainer:"styles_errorContainer__FOFAe",error:"styles_error__zyKBC",errorTitle:"styles_errorTitle__ERCCx"}},481:function(e){e.exports={editor:"styles_editor__E3lMc",textarea:"styles_textarea__v6lSi"}},7266:function(e){e.exports={results:"styles_results__EXQ9C"}},1164:function(e){e.exports={root:"styles_root__FGv06",container:"styles_container__b_OzL",content:"styles_content__hvl__",toc:"styles_toc__bIATy",p:"styles_p__HqdKC"}}},function(e){e.O(0,[400,667,488,744],function(){return e(e.s=9874)}),_N_E=e.O()}]);