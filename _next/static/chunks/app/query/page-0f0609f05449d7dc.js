(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{4655:function(e,t,n){Promise.resolve().then(n.bind(n,5623)),Promise.resolve().then(n.t.bind(n,1164,23)),Promise.resolve().then(n.t.bind(n,5964,23)),Promise.resolve().then(n.bind(n,7606))},7606:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r,s=n(9268),l=n(6006),o=n(5644),a=n.n(o),i=n(7266),c=n.n(i);function u(e){let{results:t}=e;return(0,s.jsx)("div",{className:c().results,children:(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:t.columns.map((e,t)=>(0,s.jsx)("th",{children:e},t))}),t.values.map((e,t)=>(0,s.jsx)("tr",{children:e.map((e,t)=>(0,s.jsx)("td",{children:e},t))},t))]})})})}var _=n(7736),d=n.n(_),y=n(481),f=n.n(y),h=n(5964),p=n.n(h);function m(e){let{children:t,highlit:n=!1}=e;return(0,s.jsx)("div",{className:[p().container,n?p().highlit:null].filter(Boolean).join(" "),children:t})}var v=n(1634),g=n.n(v);let x=/\r\n|\r|\n/;function b(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)}let j=(e,t)=>{let n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)};function N(e){let{children:t,language:n,highlight:r}=e,l=t.replace(/\n$|^\n/g,""),o=function(e,t){let n=g().languages[e],r={code:t,grammar:n,language:e,tokens:[]};return g().hooks.run("before-tokenize",r),r.tokens=g().tokenize(t,n),g().hooks.run("after-tokenize",r),function(e){let t=[[]],n=[e],r=[0],s=[e.length],l=0,o=0,a=[],i=[a];for(;o>-1;){for(;(l=r[o]++)<s[o];){let e;let c=t[o],u=n[o],_=u[l];if("string"==typeof _?(c=o>0?c:["plain"],e=_):(c=j(c,_.type),_.alias&&(c=j(c,_.alias)),e=_.content),"string"!=typeof e){o++,t.push(c),n.push(e),r.push(0),s.push(e.length);continue}let d=e.split(x),y=d.length;a.push({types:c,content:d[0]});for(let e=1;e<y;e++)b(a),i.push(a=[]),a.push({types:c,content:d[e]})}o--,t.pop(),n.pop(),r.pop(),s.pop()}return b(a),i}(r.tokens)}(n,l),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return()=>!1;let t=e.split(","),n=t.flatMap(e=>{if(!e.includes("-"))return Number(e);{let[t,n]=e.split("-").map(Number);return Array(n-t+1).fill(0).map((e,n)=>n+t)}});return e=>n.includes(e)}(r);return o.map((e,t)=>(0,s.jsx)("div",{className:[p().line,a(t+1)?p().highlight:""].join(" "),children:e.map((e,t)=>(0,s.jsx)("span",{className:e.types.map(e=>p()[e]).join(" "),children:e.content},t))},t))}function w(e){let{code:t,setCode:n}=e;return(0,s.jsx)("div",{className:f().editor,children:(0,s.jsx)(m,{children:(0,s.jsx)(d(),{value:t,onValueChange:n,highlight:e=>(0,s.jsx)(N,{language:"javascript",children:e}),className:f().textarea})})})}let E=Symbol();async function I(e){let t=[];for await(let n of e)t.push(n);return t}function*S(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,s]=t;yield{type:"part",value:r[0]};for(let e=0;e<s.length;e++){let t=s[e];t&&"object"==typeof t&&E in t?yield*S(...t[E]()):yield{type:"bind",value:t},yield{type:"part",value:r[e+1]}}}let A=(r=async function*(){},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];let l=Array.from(function*(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r="";for(let{type:e,value:n}of S(...t))"bind"===e?(yield r,r=""):r+=n;yield r}(e,n)),o=Array.from(function*(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let{type:e,value:n}of S(...t))"bind"===e&&(yield n)}(e,n));return{[E]:()=>[l,o],then(e,t){return I(this).then(e,t)},[Symbol.asyncIterator]:()=>r(l,o)}});var C=n(9536),k=n.n(C);function B(e){let t,n,{type:r,value:l}=e;switch(n=l instanceof Error?l.name+": "+l.message:JSON.stringify(l),r){case"js_error":t="Javasript Error";break;case"sql_error":t="SQL Error";break;case"return_error":n="Return a query to see the results"}return(0,s.jsx)("div",{className:k().errorContainer,children:(0,s.jsxs)("div",{className:k().error,children:[t&&(0,s.jsx)("div",{className:k().errorTitle,children:t}),n]})})}var L=n(830),P=n.n(L);function q(){let e="–\\|/",[t,n]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let t=setInterval(()=>{n(t=>(t+1)%e.length)},150);return()=>clearInterval(t)}),e[t]}function O(e){let t,n,{load:r,database:l,setLoad:o}=e;return r&&l?t="✔":r&&!l?(t=(0,s.jsx)(q,{}),n="Loading"):(t=">",n="Load Live Demo"),(0,s.jsx)("button",{onClick:()=>o(!0),disabled:r,className:P().loadContainer,...l&&{"data-database":!0},children:(0,s.jsxs)("div",{className:P().loadButton,children:[(0,s.jsx)("span",{className:P().loadButtonIcon,children:t})," ",n]})})}async function R(e){let t=await n.e(65).then(n.t.bind(n,851,23));e.throwIfAborted();let{Database:r}=await t.default();return r}async function D(e){let t=await fetch("/query/database",{signal:e});e.throwIfAborted();let n=await t.arrayBuffer();return new Uint8Array(n)}async function J(e){let[t,n]=await Promise.all([R(e),D(e)]);e.throwIfAborted();let r=new t(n);return e.addEventListener("abort",()=>r.close()),r}function Q(e){let{initialResults:t,initialCode:n}=e,[r,o]=(0,l.useState)(!1),i=function(e){let[t,n]=(0,l.useState)();return(0,l.useEffect)(()=>{if(!e)return;let t=new AbortController;return(async()=>{try{let e=await J(t.signal);t.signal.throwIfAborted(),n(e)}catch(e){}})(),()=>t.abort()},[e]),t}(r),[c,_]=(0,l.useState)(n),[d,y]=(0,l.useState)(t),[f,h]=(0,l.useState)({type:"result",value:t});return(0,l.useEffect)(()=>{if(!i)return;let e=function(e,t){try{let n=Function("$",t),r=n(A);if(!r||"object"!=typeof r||!(E in r))return{type:"return_error",value:r};{let[t,n]=r[E]();try{let r=e.exec(t.join("?"),n)[0];if(!r)return{type:"sql_error",value:Error("No results")};return{type:"result",value:r}}catch(e){return{type:"sql_error",value:e}}}}catch(e){return{type:"js_error",value:e}}}(i,c);h(e),"result"===e.type&&y(e.value)},[i,c]),(0,s.jsx)("section",{id:"Demo",className:a().container,children:(0,s.jsxs)("div",{className:a().card,children:[(0,s.jsxs)("div",{className:a().side,children:[(0,s.jsx)("time",{className:a().date,children:"June 2023"}),(0,s.jsxs)("h1",{className:a().title,children:["SQL Interfaces &",(0,s.jsx)("br",{}),"The 80/20 Rule"]}),(0,s.jsx)("h2",{className:a().tagline,children:"Developing a minimal interface for composing and executing SQL queries"})]}),(0,s.jsxs)("div",{className:a().main,children:[(0,s.jsxs)("div",{className:a().editor,children:[(0,s.jsx)(w,{code:c,setCode:_}),(0,s.jsx)(O,{load:r,database:!!i,setLoad:o})]}),(0,s.jsxs)("div",{className:a().results,children:["result"!==f.type&&(0,s.jsx)(B,{...f}),(0,s.jsx)(u,{results:d})]})]})]})})}},5623:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(9268),s=n(5111),l=n.n(s),o=n(6006),a=n(1164),i=n.n(a);function c(e){let{titles:t}=e,[n,s]=(0,o.useState)(t[0]);return(0,o.useEffect)(()=>{let e=new IntersectionObserver(e=>{let t=e.filter(e=>e.isIntersecting),n=l()(t,e=>e.intersectionRect.top);n&&s(n.target.id)},{rootMargin:"0 0 -90% 0"});for(let n of t){let t=document.getElementById(encodeURIComponent(n));t&&e.observe(t)}return()=>e.disconnect()},[t]),t.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#"+encodeURIComponent(e),className:n===encodeURIComponent(e)?i().intersect:void 0,children:e})},e))}},5964:function(e){e.exports={container:"styles_container__jy1l_",highlit:"styles_highlit__JjWSK",line:"styles_line__aOS_T",highlight:"styles_highlight__lqo_T",comment:"styles_comment__UauEA",string:"styles_string__bCSta",url:"styles_url__fwX6P",symbol:"styles_symbol__PsLb2",variable:"styles_variable__EFBo4",number:"styles_number__dhAtQ",builtin:"styles_builtin__pNr_d",char:"styles_char__xdODs",constant:"styles_constant__YDnmm",function:"styles_function__1eRN9",tag:"styles_tag__0_sqj",operator:"styles_operator__ty4_w",keyword:"styles_keyword__RcxoL",boolean:"styles_boolean__MSjvs",property:"styles_property__BaBI9",namespace:"styles_namespace__KWXQL"}},9536:function(e){e.exports={errorContainer:"styles_errorContainer__fAmEE",error:"styles_error__BljDo",errorTitle:"styles_errorTitle__bQVm_"}},830:function(e){e.exports={loadContainer:"styles_loadContainer__Xg_Dt",loadButton:"styles_loadButton__CoOlg",loadButtonIcon:"styles_loadButtonIcon__sfcAu"}},5644:function(e){e.exports={container:"styles_container__S0Ptr",card:"styles_card__xSmZP",side:"styles_side__fA9nv",main:"styles_main__JNmlP",date:"styles_date__GnoPJ",title:"styles_title__wEJ_p",tagline:"styles_tagline__yu5i4",editor:"styles_editor__vc_fu",results:"styles_results__IX3in"}},481:function(e){e.exports={editor:"styles_editor__E3lMc",textarea:"styles_textarea__v6lSi"}},7266:function(e){e.exports={results:"styles_results__EXQ9C"}},1164:function(e){e.exports={root:"styles_root__FGv06",container:"styles_container__b_OzL",content:"styles_content__hvl__",toc:"styles_toc__bIATy",intersect:"styles_intersect__XwP0Z",p:"styles_p__HqdKC"}}},function(e){e.O(0,[391,667,488,744],function(){return e(e.s=4655)}),_N_E=e.O()}]);